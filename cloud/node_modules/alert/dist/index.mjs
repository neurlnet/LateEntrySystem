"use client";import g,{useCallback as N,useEffect as b,useState as T}from"react";var f=class{constructor(){this.toasts=[],this.subscribers=[]}subscribe(s){return this.subscribers=[...this.subscribers,s],()=>{this.subscribers.splice(this.subscribers.indexOf(s),1)}}publish(s){this.subscribers.forEach(e=>e(s))}add(s,e){let r={id:this.toasts.length,state:"enter",type:e,title:s};return this.toasts=[...this.toasts,r],this.publish(r),r}update(s){let e=this.toasts.findIndex(r=>r.id===s.id);this.toasts[e]=s,this.publish(s)}},a=new f;import B from"react";function h(t,{insertAt:s}={}){if(!t||typeof document=="undefined")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",s==="top"&&e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}h(`.toast-enter{animation:enterAnimation .35s cubic-bezier(.21,1.02,.73,1) forwards}.toast-leave{animation:leaveAnimation .4s cubic-bezier(.06,.71,.55,1) forwards}.loading-icon{width:16px;height:16px;margin-right:4px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:#e0e0e0;border-right-color:#111827;animation:rotateAnimation 1s linear infinite}@keyframes enterAnimation{0%{transform:translate3d(0,200%,0) scale(.6);opacity:.5}to{transform:translateZ(0) scale(1);opacity:1}}@keyframes leaveAnimation{0%{transform:translateZ(-1px) scale(1);opacity:1}to{transform:translate3d(0,150%,-1px) scale(.6);opacity:0}}@keyframes rotateAnimation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);import c from"react";var y=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20","data-testid":"success-icon"},c.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),v=c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20","data-testid":"error-icon"},c.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),I=c.createElement("div",{className:"loading-icon","data-testid":"loading-icon"});var w=({toast:t})=>{let s=t.theme==="light"?"rgb(243, 244, 246)":"rgb(17, 24, 39)",e=t.theme==="light"?"rgb(17, 24, 39)":"rgb(243, 244, 246)";return B.createElement("div",{className:`toast-${t.state}`,style:{paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1rem",paddingRight:"1rem",borderRadius:"0.375rem",backgroundColor:s,fontWeight:500,fontSize:"0.875rem",lineHeight:"1.25rem",color:e,zIndex:t.zIndex,display:"flex",gap:4,minWidth:220,position:"relative",alignItems:"center"},key:t.id},t.type==="success"&&y,t.type==="error"&&v,t.type==="loading"&&I,t.title)};var j=({position:t="bottom-right",duration:s=3e3,reverse:e=!1,theme:r="light",style:Z,className:D})=>{let[m,p]=T([]),[S,z]=T({}),[C,A]=T(0);b(()=>{let o=a.subscribe(i=>{p(n=>{var d=n.findIndex(u=>u.id===i.id);if(d===-1)return[...n,i];var l=[...n];return l[d]=i,l}),P(i)});return()=>{o()}},[]),b(()=>{let[o,i]=t.split("-");z({[o]:0,[i]:0})},[t]),b(()=>{A(m.length*41)},[m]);function P(o){setTimeout(()=>x(o,"idle"),300),o.type!=="loading"&&(setTimeout(()=>x(o,"leave"),s-100),setTimeout(()=>k(o),s))}function x(o,i){p(n=>{var d=n.slice(),l=d.findIndex(u=>u.id===o.id);return d[l]={...d[l],state:i},d})}let k=N(o=>p(i=>i.filter(n=>n.id!==o.id)),[]),E=e?m.slice().reverse():m;return g.createElement("section",{style:{position:"fixed",zIndex:9999,display:"flex",flexDirection:"column",gap:5,margin:16,transform:"translateY(0)",height:C,transition:"all 230ms cubic-bezier(.21, 1.02, .73, 1)",...S}},t.startsWith("bottom")&&!e&&g.createElement("div",{className:"flex h-full w-full grow"}),E.map((o,i)=>g.createElement(w,{key:i,toast:{...o,zIndex:i,theme:r}})))};var L=(t,s)=>{var e=a.add(s.loading,"loading");return e.state="idle",t().then(r=>(e.type="success",e.title=s.success,a.update(e),r),r=>(e.type="error",e.title=s.error,a.update(e),Promise.reject(r)))},W=t=>{a.add(t,"success")},H=t=>{a.add(t,"error")},M=t=>{a.add(t,"default")},O=Object.assign(M,{success:W,error:H,promise:L});export{j as Toaster,O as toast};
//# sourceMappingURL=index.mjs.map